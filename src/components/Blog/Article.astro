---
import ButtonLink from "@components/Button/ButtonLink.astro";
import Chip from "@components/Chip/Chip.astro";
import { formatDate } from "@utils/date";
import { createLangHref, type Lang } from "@i18n/config";

interface ArticleProps {
  date: Date;
  excerpt: string;
  slug: string;
  title: string;
  tags: string[];
}

interface ArticleTranslations {
  lang: Lang;
  readLabel: string;
  dateLocale: string;
}

type Props = ArticleProps & ArticleTranslations;

const { date, excerpt, slug, tags, title, lang, readLabel, dateLocale } =
  Astro.props;
---

<article
  class="bg-white border border-neutral-200 rounded-sm p-8 shadow-sm hover:border-neutral-300 transition-colors"
>
  <div class="flex flex-col space-y-4">
    <header class="space-y-1">
      <time class="text-xs text-muted block" datetime={date.toISOString()}>
        {formatDate(date, dateLocale)}
      </time>
      <h3
        class="text-2xl font-medium text-heading hover:text-body transition-colors"
      >
        <a href={createLangHref(lang, `/blog/${slug}`)} class="block">
          {title}
        </a>
      </h3>
    </header>

    <p class="text-body leading-relaxed">{excerpt}</p>

    <div class="flex flex-wrap gap-2">
      {tags.map((text) => <Chip>{text}</Chip>)}
    </div>

    <div class="pt-2">
      <ButtonLink href={createLangHref(lang, `/blog/${slug}`)}>
        {readLabel}
      </ButtonLink>
    </div>
  </div>
</article>
