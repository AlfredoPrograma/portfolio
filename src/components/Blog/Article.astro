---
import ButtonLink from "@components/Button/ButtonLink.astro";
import Chip from "@components/Chip/Chip.astro";
import { formatDate } from "@utils/date";
import { createLangHref, type Lang } from "@i18n/config";

interface ArticleProps {
  date: Date;
  excerpt: string;
  slug: string;
  title: string;
  tags: string[];
}

interface ArticleTranslations {
  lang: Lang;
  readLabel: string;
  dateLocale: string;
}

type Props = ArticleProps & ArticleTranslations;

const { date, excerpt, slug, tags, title, lang, readLabel, dateLocale } =
  Astro.props;

const href = createLangHref(lang, `/blog/${slug}`);
---

<article
  class="relative bg-white border border-neutral-200 rounded-sm p-8 shadow-sm transition-all duration-200 group hover:-translate-y-1 hover:shadow-lg hover:border-neutral-300 hover:bg-neutral-50"
>
  <a
    href={href}
    aria-label={`${readLabel}: ${title}`}
    class="absolute inset-0 rounded-sm hidden md:block focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-neutral-900"
  ></a>
  <div
    class="relative z-10 flex flex-col space-y-4 pointer-events-auto md:pointer-events-none"
  >
    <header class="space-y-1">
      <time class="text-xs text-muted block" datetime={date.toISOString()}>
        {formatDate(date, dateLocale)}
      </time>
      <h3
        class="text-2xl font-medium text-heading transition-colors group-hover:text-heading group-hover:underline"
      >
        {title}
      </h3>
    </header>

    <p
      class="text-body leading-relaxed transition-colors group-hover:text-heading"
    >
      {excerpt}
    </p>

    <div class="flex flex-wrap gap-2 md:mb-0">
      {tags.toSorted().map((text) => <Chip>{text}</Chip>)}
    </div>

    <div class="inline-flex self-start md:hidden">
      <ButtonLink href={href} size="sm">
        {readLabel}
      </ButtonLink>
    </div>
  </div>
</article>
